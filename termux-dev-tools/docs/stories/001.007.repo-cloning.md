# Story 1.7: Repository Cloning

## Status
- Approved

## Story
**As a** developer starting a new project,
**I want** the installer to clone my specified bootstrap repository,
**so that** my project files are set up in a predictable location.

## Acceptance Criteria
1. The script must prompt the user to provide the SSH URL of the Git repository they wish to clone.
2. The script must ensure a base directory for projects exists (e.g., `~/projects`). If it doesn't, it must be created.
3. The script must clone the specified repository into the base projects directory.
4. The script must check if a directory with the same name as the repository already exists to prevent an error. If it exists, the script should report it and skip the clone.
5. If the `git clone` command fails (e.g., due to an invalid URL or lack of permissions), a clear error message must be displayed to the user.

## Tasks / Subtasks
- [ ] **Task 1: Get Repository URL (AC: #1)**
    - [ ] Use `read -p` to prompt the user for the repository's SSH URL.
- [ ] **Task 2: Ensure Projects Directory Exists (AC: #2)**
    - [ ] Check for the existence of the `~/projects` directory.
    - [ ] If it doesn't exist, create it with `mkdir -p ~/projects`.
- [ ] **Task 3: Check for Existing Repo Directory (AC: #4)**
    - [ ] Parse the repository name from the URL.
    - [ ] Check if a directory with that name already exists in `~/projects`.
- [ ] **Task 4: Clone Repository (AC: #3, #5)**
    - [ ] If no existing directory is found, execute the `git clone` command.
    - [ ] Check the exit code of the `git clone` command to detect failures and log appropriate errors.

## Dev Notes
- **Source Tree**: This could be part of the `scripts/setup-github.sh` script or a new script, as it's closely related to the GitHub setup.
- **Dependency**: This story is highly dependent on Story 1.6 (GitHub Automation). The `git clone` will fail if SSH authentication is not working correctly.
- **Configuration**: In the future, the destination directory (`~/projects`) and the repository URL could be passed as command-line arguments instead of being prompted for interactively.

### Testing
- **Test File Location**: `tests/test-repo-cloning.sh`
- **Test Standards**: Mock the `git clone` command and user input.
- **Requirements**:
    - Test the success path where a valid URL is provided and the repo doesn't exist.
    - Test the case where the target directory already exists.
    - Test the case where the user provides an invalid URL and `git clone` fails.

## Change Log
| Date | Version | Description | Author |
|---|---|---|---|
| 2025-10-11 | 1.0 | Initial draft | Sarah (PO) |
